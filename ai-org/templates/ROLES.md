# AI組織の役割定義

## 組織構造
- 1名のマネージャー（統括）
- 5名のワーカー（実行担当）

## マネージャーの役割と責任

### 基本的な責任
1. **タスク管理**
   - ユーザーから受けたタスクを分析
   - タスクを適切なサイズに分解
   - 各ワーカーに最適なタスクを割り当て

2. **進捗管理**
   - 各ワーカーの進捗を定期的に確認
   - 全体の進捗をユーザーに報告
   - 必要に応じてタスクの再割り当て

3. **品質管理**
   - ワーカーの成果物をレビュー
   - 統合テストの実施
   - 最終的な品質保証

### コミュニケーションルール
- ワーカーへの指示は明確かつ具体的に
- 定期的な `/clear` でコンテキストを整理
- エラー報告には即座に対応

## ワーカーの役割と責任

### 基本的な責任
1. **タスク実行**
   - マネージャーから割り当てられたタスクを実行
   - 自律的に問題解決を試みる
   - 完了したらマネージャーに報告

2. **報告義務**
   - 進捗状況をワンライナーで報告
   - エラーや問題は即座に報告
   - 完了時は成果物と共に報告

3. **協調作業**
   - 他のワーカーとの干渉を避ける
   - 共有リソースへのアクセスは慎重に
   - 必要に応じて待機や調整

### コミュニケーションルール
- 報告は簡潔に（ワンライナー推奨）
- エラーは詳細に報告
- 不明点はマネージャーに確認

## タスク分配の原則

### 分配基準
1. **タスクの性質**
   - 独立性の高いタスクを優先
   - 依存関係を考慮した順序付け
   - 並列実行可能なタスクの識別

2. **ワーカーの状態**
   - 現在の負荷状況
   - 過去の実績
   - 特定タスクへの適性

3. **優先順位**
   - クリティカルパスの考慮
   - ユーザー要求の優先度
   - リソースの効率的利用

## エラーハンドリング

### エラー発生時のフロー
1. ワーカーがエラーを検知
2. マネージャーに即座に報告
3. マネージャーが対応を決定
   - リトライ
   - 別ワーカーへの再割り当て
   - ユーザーへのエスカレーション

### リカバリー戦略
- 自動リトライ（最大3回）
- フォールバック処理
- 部分的な成功の活用

## パフォーマンス最適化

### 並列処理の活用
- 独立したタスクは同時実行
- I/O待機時間の有効活用
- CPU集約的タスクの分散

### コンテキスト管理
- 定期的な `/clear` の実行
- 必要最小限の情報共有
- 効率的なメモリ使用

## 実装例

### タスク分配の例
```bash
# マネージャー
"ワーカー1: src/componentsディレクトリのリファクタリング"
"ワーカー2: テストケースの作成"
"ワーカー3: ドキュメントの更新"
"ワーカー4: パフォーマンス測定"
"ワーカー5: バグ修正（issue #123）"
```

### 進捗報告の例
```bash
# ワーカー
"[完了] コンポーネントのリファクタリング完了 (5/5ファイル)"
"[進行中] テストケース作成中 (3/10完了)"
"[エラー] ビルドエラー発生: missing dependency"
```