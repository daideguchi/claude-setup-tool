# Claude Code 初期設定システム

## 概要
このプロジェクトは、Claude Codeを使用した開発環境の初期設定を自動化するツールです。

## 📚 ドキュメント自動更新システム

このプロジェクトでは、開発中に得られた知識を体系的に管理し、既存ドキュメントに反映させるシステムを採用しています。

### 参照すべきドキュメント

作業開始時に必ず以下のドキュメントを確認してください：
- `.cursor/rules/coding-standards.md` - Next.js 14 + TypeScript + React ベストプラクティス
- `.cursor/rules/architecture.md` - コンポーネント設計・プロジェクト構造・パフォーマンス戦略
- `.cursor/rules/patterns.md` - React・Next.js・TypeScript の実用的パターン集
- `.cursor/rules/troubleshooting.md` - 一般的な問題の解決方法とデバッグ技法
- `.cursor/rules/dependencies.md` - Next.js 14 プロジェクト推奨ライブラリと管理方針

### 更新ルール

#### 基本原則
- **追加のみ**: 既存のドキュメントを削除・編集せず、新しい内容を追加する
- **ユーザー承認必須**: 全ての更新提案はユーザーの明示的な承認を得る
- **コンテキスト保持**: 会話の流れを保ちながら段階的に更新
- **100行ルール**: ドキュメントが100行を超えたら関連内容を別ファイルに分離

#### 提案タイミング
以下の状況で、ドキュメント更新を提案してください：

1. **エラーや問題を解決した時**
   - 解決方法が再利用可能な場合
   - 同じ問題に遭遇する可能性がある場合

2. **効率的な実装パターンを発見した時**
   - コードの簡潔性が向上する場合
   - パフォーマンスが改善される場合

3. **新しいAPI/ライブラリの使用方法を確立した時**
   - 初めて使用するツールの設定方法
   - ベストプラクティスを発見した場合

4. **既存ドキュメントの情報が古い/不正確だと判明した時**
   - バージョンアップによる変更
   - より良い方法の発見

5. **頻繁に参照される情報を発見した時**
   - 開発中に何度も確認する情報
   - チームメンバーがよく質問する内容

6. **コードレビューの修正を終わらせた時**
   - レビューで指摘された改善点
   - 新しいコーディング規約の追加

#### 提案フォーマット
```
💡 ドキュメント更新の提案: [状況の説明]
【更新内容】 [具体的な追加/修正内容]
【更新候補】
1. [ファイルパス1] - [理由]
2. [ファイルパス2] - [理由]
3. 新規ファイル作成 - [理由]
どこに追加しますか？（番号を選択 or skip）
```

#### 承認プロセス
1. **更新先の選択**: ユーザーが番号で更新先を選択
2. **内容のプレビュー**: 実際の更新内容を表示
3. **最終承認**: ユーザーが yes/edit/no で承認
4. **ファイル更新**: 承認後に該当ファイルを更新

### ドキュメント構成

```
CLAUDE.md (メインルール)
├── .cursor/rules/
│   ├── coding-standards.md    # コーディング規約
│   ├── architecture.md        # アーキテクチャ決定
│   ├── patterns.md           # デザインパターン
│   ├── troubleshooting.md    # トラブルシューティング
│   ├── dependencies.md       # 依存関係管理
│   ├── update-system.md      # 更新システムのルール（100行超えた場合）
│   ├── project-specific.md   # プロジェクト固有の設定（100行超えた場合）
│   └── references.md         # 参照すべきドキュメントリスト（100行超えた場合）
```

### ドキュメント分割のガイドライン

ドキュメントが100行を超えた場合、以下の方針で分割：

1. **関連性の高い内容をグループ化**
   - 同じトピックの情報をまとめる
   - 依存関係のある内容は同じファイルに

2. **推奨される分割先**
   - `.cursor/rules/update-system.md` - 更新システムの詳細ルール
   - `.cursor/rules/project-specific.md` - プロジェクト固有の設定
   - `.cursor/rules/references.md` - 外部参照リンクまとめ

3. **分割時の注意点**
   - 元ファイルには参照リンクを残す
   - 新ファイルの冒頭に元ファイルへのリンクを記載
   - 関連ファイル間の整合性を保つ

### 重要な制約

- **ユーザーの明示的な承認なしに更新しない**
- **既存の内容を削除・変更しない（追加のみ）**
- **各ドキュメントは特定の責務を持つ**
- **更新履歴を保持する**
- **ドキュメントの可読性を維持する（100行ルール）**

### 更新例

#### 例1: エラー解決方法の追加
```markdown
## TypeScriptエラーの解決

### 問題: 'Cannot find module' エラー
- **原因**: tsconfig.jsonのpaths設定不足
- **解決方法**: 
  ```json
  {
    "compilerOptions": {
      "paths": {
        "@/*": ["./src/*"]
      }
    }
  }
  ```
- **追加日**: 2024-01-15
```

#### 例2: 新しいパターンの追加
```markdown
## 効率的な実装パターン

### React Hooksの組み合わせパターン
- **用途**: 複数の状態を一つのオブジェクトで管理
- **実装**:
  ```typescript
  const useFormState = () => {
    const [state, setState] = useState({
      values: {},
      errors: {},
      touched: {}
    });
    // ...
  };
  ```
- **メリット**: 状態管理の簡潔化
- **追加日**: 2024-01-16
```

## プロジェクト固有の設定

### 初期設定の自動化
このプロジェクトでは、以下の2つの機能を提供します：
1. **基本初期設定**: 全てのプロジェクトで必要な基本的な設定
2. **AI組織設定 (claude-code-company)**: 大規模プロジェクト向けの高度な設定

### セットアップ方法
```bash
# 基本初期設定のみ
./scripts/setup.sh

# AI組織設定も含む
./scripts/setup.sh --with-ai-org
```

## 更新履歴
- 2025-06-20: 初期作成